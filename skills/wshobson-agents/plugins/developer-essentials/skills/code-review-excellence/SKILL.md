# 代码审查卓越实践 - Code Review Excellence

> **原始仓库**: `wshobson/agents/code-review-excellence`
> **安装量**: 3.5K
> **翻译日期**: 2026-02-15
> **原文链接**: https://github.com/yanghao1143/chiclaude-skills

---

## 📖 技能简介

系统化的代码审查最佳实践，包括审查清单、常见问题识别、建设性反馈技巧和代码质量改进策略。

---

## 🎯 何时使用此技能

当用户进行以下工作时使用：

- 进行代码审查
- 提供代码反馈
- 改进代码质量
- 建立审查流程

---

## 📋 代码审查清单

### 功能正确性

- [ ] 代码是否实现了预期功能？
- [ ] 边界情况是否处理？
- [ ] 错误处理是否完善？
- [ ] 是否有测试覆盖？

### 代码质量

- [ ] 代码是否易读？
- [ ] 命名是否清晰？
- [ ] 是否有重复代码？
- [ ] 函数是否过长？

### 性能

- [ ] 是否有性能问题？
- [ ] 是否有不必要的计算？
- [ ] 数据结构选择是否合适？

### 安全性

- [ ] 是否有安全漏洞？
- [ ] 敏感数据是否加密？
- [ ] 输入是否验证？

---

## 🔍 常见问题识别

### 1. 代码异味

| 问题 | 示例 | 改进 |
|------|------|------|
| 过长函数 | 函数超过 50 行 | 拆分为小函数 |
| 过深嵌套 | 4 层以上 if | 提前返回，使用守卫语句 |
| 魔法数字 | `if (x > 86400)` | 使用常量 `SECONDS_PER_DAY` |
| 重复代码 | 多处相似逻辑 | 提取公共方法 |

### 2. 性能问题

```python
# 问题：在循环中进行数据库查询
for user in users:
    data = db.query(f"SELECT * FROM orders WHERE user_id = {user.id}")

# 改进：批量查询
user_ids = [u.id for u in users]
data = db.query(f"SELECT * FROM orders WHERE user_id IN {user_ids}")
```

### 3. 安全问题

```python
# 问题：SQL 注入风险
cursor.execute(f"SELECT * FROM users WHERE id = {user_input}")

# 改进：参数化查询
cursor.execute("SELECT * FROM users WHERE id = ?", (user_input,))
```

---

## 💬 建设性反馈技巧

### 反馈格式

```
【位置】文件:行号

【问题】描述发现的问题

【建议】提供具体的改进建议

【原因】解释为什么这是个问题
```

### 示例

```
【位置】src/utils.ts:45

【问题】函数 `processData` 有 80 行，逻辑较复杂

【建议】考虑拆分为：
- `validateInput` - 验证输入
- `transformData` - 数据转换
- `saveResult` - 保存结果

【原因】提高可读性和可测试性
```

### 反馈原则

1. **对事不对人** - 评论代码，不评论人
2. **具体明确** - 给出具体的改进建议
3. **解释原因** - 说明为什么需要改进
4. **提出问题** - 有时提问比直接指出更好

---

## 🏆 审查最佳实践

### 审查者

1. **及时响应** - 24 小时内开始审查
2. **专注审查** - 每次不超过 60 分钟
3. **区分重要程度** - 标注 [必须] / [建议] / [讨论]
4. **认可好的代码** - 不只是找问题

### 被审查者

1. **自审先行** - 提交前自己审查
2. **描述清晰** - 说明改动原因和影响
3. **保持开放** - 接受建设性意见
4. **及时响应** - 快速处理审查意见

---

## 📊 审查指标

| 指标 | 建议值 |
|------|--------|
| 首次响应时间 | < 24 小时 |
| 审查时间 | < 60 分钟/次 |
| 每次审查行数 | < 400 行 |
| 发现问题数 | 5-15 个/审查 |

---

## 🔗 相关链接

- [原文链接](https://github.com/yanghao1143/chiclaude-skills)
- [GitHub 仓库](https://github.com/wshobson/agents)
- [OpenClaw AI 社区](https://chiclaude.com)

---

*翻译搬运自 [skills.sh](https://skills.sh)*
